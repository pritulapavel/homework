<!DOCTYPE html>
<html lang="ka">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Pavle Pritula">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="assets/img/favicons/site.webmanifest">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <title>TechBlog - The news from TechBlog</title>
</head>

<body class="animate__animated animate__flip">
    <header>
        <div class="header-inner">
            <div class="logo">
                <a href="#"><img src="assets/img/logo.png" alt="TechBlog Logo"></a>
            </div>
            <input type="checkbox" id="menu-toggle" class="menu-checkbox">
            <label for="menu-toggle" class="menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </label>

            <nav class="main-nav" aria-label="Main header navigation">
                <ul>
                    <li><a href="#">მთავარი</a></li>
                    <li><a href="#">ბლოგი</a></li>
                    <li><a href="#">კატეგორიები</a></li>
                    <li><a href="#">ჩვენს შესახებ</a></li>
                    <li><a href="#">კონტაქტი</a></li>
                </ul>
            </nav>
            <nav class="mobile-menu" aria-label="Mobile menu">
                <ul>
                    <li><a href="#">მთავარი</a></li>
                    <li><a href="#">ბლოგი</a></li>
                    <li><a href="#">კატეგორიები</a></li>
                    <li><a href="#">ჩვენს შესახებ</a></li>
                    <li><a href="#">კონტაქტი</a></li>
                </ul>
            </nav>
            <label for="menu-toggle" class="menu-overlay"></label>
        </div>
    </header>
    <main>
        <section class="hero">
            <h1>აღმოაჩინე ტექნოლოგიების სამყარო</h1>
            <h2>თანამედროვე ტექნოლოგიები და ინოვაციები ერთ სივრცეში</h2>
        </section>
        <section class="content">
            <h3>ბოლო სიახლეები</h3>
            <div class="articles" id="newsContainer">
                <div id="newsLoader" class="news-loader">
                    <div class="news-loader-bar"></div>
                    <span>სიახლეები იტვირთება...</span>
                </div>
            </div>
                
        </section>
    </main>
    <footer>
        <div class="footer-top">
            <div class="container">
                <div class="footer-col">
                    <h4>TechBlog</h4>
                    <p>თანამედროვე ტექნოლოგიების შესახებ საინფორმაციო პლატფორმა. ჩვენ გთავაზობთ უახლეს სიახლეებს IT
                        სფეროდან.</p>
                </div>
                <div class="footer-col">
                    <h4>კატეგორიები</h4>
                    <nav class="footer-nav" aria-label="Footer navigation categories">
                        <ul>
                            <li><a href="#">პროგრამირება</a></li>
                            <li><a href="#">დიზაინი</a></li>
                            <li><a href="#">უსაფრთხოება</a></li>
                            <li><a href="#">ხელოვნური ინტელექტი</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="footer-col">
                    <h4>კონტაქტი</h4>
                    <nav class="footer-nav" aria-label="Footer navigation contact information">
                        <ul>
                            <li>Email: <a href="mailto:info@techblog.ge">info@techblog.ge</a></li>
                            <li>Phone: <a href="tel:555123456">+995 555 123 456</a></li>
                            <li>Address: <a href="https://maps.app.goo.gl/znvwquxEhuEvCK127" target="_blank">Tbilisi,
                                    Georgia</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container copyright">
                <p>&copy; 2026 TechBlog. ყველა უფლება დაცულია.</p>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const container = document.getElementById('newsContainer');
            const loader = document.getElementById('newsLoader');
            const min_loading_time = 2000; // Minimum loading time in milliseconds for see loading effect
            const startTime = Date.now(); // Start time to calculate elapsed time

            // use api call for travel news and render them
            fetch('https://gogex.ge/api/get_news/ka')
            .then(res => res.json())
            .then(result => {
                const elapsed = Date.now() - startTime;
                const delay = Math.max(0, min_loading_time - elapsed);
                setTimeout(() => {
                    loader.style.display = 'none';
                    if (!result.success || !result.data.length) {
                        container.insertAdjacentHTML('beforeend','<p>სიახლეები ვერ მოიძებნა</p>');
                        return;
                    }
                    result.data.forEach(item => {
                        container.insertAdjacentHTML('beforeend', `
                            <article>
                                <a href="#" class="article-link"
                                data-title="${item.title}"
                                data-image="${item.image}"
                                data-description="${item.description_full}"
                                data-author="${item.author}"
                                data-date="${item.day} ${item.month_name}"
                                >
                                    <figure class="article-image">
                                        <img 
                                            src="${item.image}" 
                                            alt="${item.title}" 
                                            loading="lazy"
                                        >
                                        <figcaption class="visually-hidden">
                                            ${item.title}
                                        </figcaption>
                                    </figure>
                                    <div class="article_content">
                                        <div class="article-meta">
                                            <time>
                                                ${item.day} ${item.month_name}
                                            </time>
                                            <span class="author">ავტორი: ${item.author}</span>
                                        </div>
                                        <h4>${item.title}</h4>
                                        <p>${item.description}</p>
                                    </div>
                                </a>
                            </article>
                        `);
                    });
                }, delay);
            })
            .catch(() => {
                const elapsed = Date.now() - startTime;
                const delay = Math.max(0, min_loading_time - elapsed);
                setTimeout(() => {
                    loader.style.display = 'none';
                    container.insertAdjacentHTML('beforeend','<p>სიახლეები ვერ მოიძებნა</p>');
                }, delay);
            });
            document.addEventListener('click', function (e) {
                const link = e.target.closest('.article-link');
                if (!link) return;
                e.preventDefault();
                const modal = document.getElementById('myFullNewsContainer');
                modal.querySelector('h4').textContent = link.dataset.title;
                modal.querySelector('p').textContent = link.dataset.description;
                modal.querySelector('time').textContent = link.dataset.date;
                modal.querySelector('.author').textContent = `ავტორი: ${link.dataset.author}`;

                const img = modal.querySelector('img');
                img.src = link.dataset.image;
                img.alt = link.dataset.title;
                modal.classList.add('open');

                const figcaption = modal.querySelector('figcaption');
                figcaption.textContent = link.dataset.title;
            });
            document.getElementById('myFullNewsContainer').addEventListener('click', function (e) {
                if (
                    e.target.classList.contains('news-modal-overlay') ||
                    e.target.classList.contains('news-modal-close')
                ) {
                    this.classList.remove('open');
                }
            });
        });
    </script>
    <div class="news-modal" id="myFullNewsContainer">
        <div class="news-modal-overlay"></div>
        <div class="news-modal-content animate__animated animate__tada">
            <button class="news-modal-close" aria-label="Close modal box">X</button>
            <figure class="news-modal-image">
                <img src="" alt="">
                <figcaption class="visually-hidden"></figcaption>
            </figure>
            <div class="news-modal-body">
                <div class="news-modal-meta">
                    <time></time>
                    <span class="author"></span>
                </div>
                <h4></h4>
                <p></p>
            </div>
        </div>
    </div>
</body>

</html>